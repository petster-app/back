<%- include('../layout/head') %>

<nav>
  <svg id="logo-icon" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="paw" class="svg-inline--fa fa-paw fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"></path></svg>
<ul class="navUl">
  <li class="navLi"><a class="navA" href="/">Home</a></li>
  <li class="navA">.</li>
  <li class="navLi"><a class="navA" href="/favorites/<%=userName%>">Favorites</a></li>
  <li class="navA">.</li>
  <li class="navLi"><a class="navA" href="/aboutUs">About Us</a></li>
</ul>
</nav>


<!-- <img id="heart" src="/img/like.png"> -->
<!-- Display Pets -->



<% var petArrayLength = petResultAPI.length; %> 

<% petResultAPI.forEach((item, index) => { %>

  <div class="loadPets <%=index %>">

    <div class="flexPet">
      <img class="pet-image" src="<%=item.photo%>">
    </div>

    
    <svg class="heart-icon" id="heart-icon<%=index %>" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="heart" class="svg-inline--fa fa-heart fa-w-16 heart" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path id="heart-path<%=index %>" fill="currentColor" d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path></svg>
    <svg class="info-icon" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
    
    
    <ul class="<%=index %>">
      
      <div class="view-details">
        <li><h4 id="petName" class="view-name"><%= item.name %></h4></li>
        <p class="petDescription">Age</p>
        <li><h4 class="view-name"><%= item.age %></h4></li>
        <p class="petDescription">Gender</p>
        <li><h4 class="view-name"><%= item.gender %></h4></li>
        <p class="petDescription">Breed</p>
        <li><h4 class="view-name"><%= item.primaryBreed %></h4></li>
        <p class="petDescription">Location</p>
        <li><h4 class="view-name"><%= item.city %>, <%= item.state %></h4></li>
        <p class="petDescription">Description</p>
        <li><h4 class="view-description"><%= item.description %></h4></li>
        <div id="fav-pet-info">
          <a class="adopt-me-button" href="<%= item.url %>">Adopt Me!</a>
        </div>
      </div>
      
    </ul>
    <form class ="petDetail <%=index %>Form" id="save-data" action="/favorites" method="post">
      <div class="hide-form-save-data">
        <input type="text" name="petfinderid" value="<%= item.petfinderid %>" required>
        <input type="text" name="userName" value="<%= userName %>" required>
        <input type="text" name="type" value="<%= item.type %>" required>
        <input type="text" name="name" value="<%= item.name %>" required>  
        <input type="text" name="age" value="<%= item.age %>" required>  
        <input type="text" name="gender" value="<%= item.gender %>" required>  
        <input type="text" name="size" value="<%= item.size %>" required>  
        <input type="text" name="city" value="<%= item.city %>" required>  
        <input type="text" name="state" value="<%= item.state %>" required> 
        <input type="text" name="primaryBreed" value="<%= item.primaryBreed %>" required> 
        <input type="text" name="description" value="<%= item.description %>" required>  
        <input type="text" name="photo" value="<%= item.photo %>" required> 
        <input type="text" name="url" value="<%= item.url %>" required>
        <button class="searchButtons <%=index %> detailsButton" id="btnSave">
        </button>
        
      </div>
    </form>
    

  </div>
    <% }) %>
    
    <div id="out-of-pets" class="<%=petArrayLength%> ranOutOfPets">
      <p>Sorry, these are all the pets that meet your search criteria right now! Try searching again later!</p>
    </div>

  <script>
    var hearts = document.getElementsByClassName('heart-icon');
    

    let isInFavs = <%- JSON.stringify(isInDataBase) %>

    console.log(isInFavs, '˜˜˜˜')

   

    console.log('IS IN FAVE',isInFavs)
 
  
      for (var favsCount = 0; favsCount < isInFavs.length; favsCount++){
        if (isInFavs[favsCount] === true){
          console.log('its true')
          let heart = document.getElementById(`heart-path${favsCount}`)
          heart.setAttribute('fill', 'red');
        }
      }
    
    //   var hearts = document.getElementsByClassName('heart-icon');
    

    // let isInFavs = <%- JSON.stringify(isInDataBase) %>

    // console.log(isInFavs)

   

    // console.log('IS IN FAVE',isInFavs)
 
  
    //   for (var favsCount = 0; favsCount < isInFavs.length; favsCount++){
    //     if (isInFavs[favsCount] === true){
    //       console.log('its true')
    //       let heart = document.getElementById(`heart-path${favsCount}`)
    //       heart.setAttribute('fill', 'red');
    //     }
    //   }
    
       
    
  </script>
    



<%- include('../layout/footer') %>

